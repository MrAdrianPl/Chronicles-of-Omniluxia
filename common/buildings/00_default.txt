############################
# Military Buildings
############################
port_building = {
	local_ship_recruit_speed = 0.15
	local_migration_speed = 0.1
	local_migration_attraction = 0.1
	local_population_capacity = 1
	local_country_civilization_value = 2
	
	allow = {
		can_have_port = yes
	}

	max_amount = 3
	
	cost = 150
	time = 180
	modification_display = {
		0 = local_migration_attraction
		1 = value_population_capacity
		2 = local_ship_recruit_speed
		3 = value_civilization_cap
	}
	
	chance = {
		modifier = {
			add = 3
			NOT = { has_building = port_building }
			OR = {
				has_city_status = yes
				owner = { num_of_ports < 4 }
			}
		}
		modifier = {
			add = 5
			has_building = port_building
		}
		modifier = {
			add = 15
			owner = { num_of_ports < 1 }
		}
		modifier = {
			add = 10
			total_population >= 35
			has_building = port_building
			has_city_status = yes
			owner = { 
				num_of_ports >= 6 
				rank > regional_power
			}
		}
	}
	
}

commerce_building = {
	local_base_trade_routes_modifier = 1.0
	local_citizen_desired_pop_ratio = 0.1
	local_country_civilization_value = 5

	cost = 180
	time = 365
	
	modification_display = {
		0 = local_base_trade_routes_modifier
		1 = local_citizen_desired_pop_ratio
		2 = value_civilization_cap
	}

	max_amount = 1

	potential = {
		has_city_status = yes
	}
	
	allow = {
		
	}
	
	chance = {
		modifier = {
			add = 
			{
				value = num_of_citizen
				max = 14
			}
		}
	}
}
fortress_building = {
	fort_level = 1
	
	cost = 300
	time = 915

	max_amount = 2
	
	modification_display = {
		0 = fort_level
	}
#AI handles fort building in code. It's too complicated to script this
}
military_building = {
	local_manpower_modifier = 0.5
	local_freemen_desired_pop_ratio = 0.1

	cost = 180
	time = 365
	
	potential = {
		has_city_status = yes
	}

	max_amount = 1

	modification_display = {
		0 = value_manpower
		1 = local_freemen_desired_pop_ratio
		2 = local_manpower_modifier
	}

	chance = {
		modifier = {
			add = 
			{
				value = province_manpower_income
				multiply = {
					value = 10
				}
			}
		}
	}
}

population_building = { 
	local_food_capacity = 500
	local_population_growth = 0.2
	local_country_civilization_value = 10

	cost = 180
	time = 365

	potential = {
		has_city_status = yes
	}

	max_amount = 1
	
	modification_display = {
		0 = local_food_capacity
		1 = local_population_growth
		2 = value_civilization_cap
	}
	chance = {
		modifier = {
			add = 40
		}
	}
}

workshop_building = { #Old trade building
	#local_goods_from_slaves = -6
	base_resources = 1
	local_slaves_desired_pop_ratio = 0.1
	local_country_civilization_value = 5

	cost = 180
	time = 365
	
	potential = {
		has_city_status = yes
	}

	max_amount = 1

	
	modification_display = {
		0 = value_num_of_goods_produced
		1 = local_slaves_desired_pop_ratio
		2 = value_civilization_cap
	}

	chance = {
		modifier = {
			add = 40
		}
	}
}

town_hall_building = { #New Trade building, unlocked by Trade Civ tech
	local_base_trade_routes_modifier = 0.35
	local_state_trade_routes = 1
	local_country_civilization_value = 5
	cost = 250
	time = 365
		
	potential = {
		has_city_status = yes
	}

	max_amount = 1

	allow = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			trigger_if = {
				limit = { is_state_capital = no }
				custom_tooltip = {
					text = "NEED_STATE_CAPITAL_TT"
					always = no
				}
			}
			trigger_if = {
				limit = { 
					owner = {
						NOR = {
							has_country_modifier = trade_3
							has_country_modifier = trade_4
						}
					} 
				}
				custom_tooltip = {
					text = "NEED_TRADE_3_TT"
					always = no
				}
			}
		}
	}

	modification_display = {
		0 = local_base_trade_routes_modifier
		1 = local_state_trade_routes
		2 = value_civilization_cap
	}

	chance = {
		modifier = {
			add = 40
			is_state_capital = yes
		}
	}
}

court_building = { #Old peace building
	city_monthly_state_loyalty = 0.1
	local_unrest = -3
	local_country_civilization_value = 10
	cost = 180
	time = 365
	
	potential = {
		has_city_status = yes
	}

	max_amount = 1

	modification_display = {
		0 = city_monthly_state_loyalty
		1 = value_unrest
		2 = value_civilization_cap
	}

	chance = {
		modifier = {
			add = {
				value = province_unrest
				multiply = {
					value = 10
				}
			}
		}
	}
}

forum_building = { #Palace
	city_monthly_state_loyalty = 0.1
	local_state_trade_routes = 2
	local_tax_modifier = 0.3
	local_population_capacity = 10
	local_country_civilization_value = 5

	cost = 360
	time = 365

	potential = {
		has_city_status = yes
	}

	max_amount = 1

	allow = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			
			custom_tooltip = {
				text = palace_dev_tt
				OR = {
					AND = {
						is_capital = yes
						owner = { has_country_modifier = palatial_2 }
					}
					AND = {
						is_state_capital = yes
						owner = { has_country_modifier = palatial_3 }
					}
					owner = { has_country_modifier = palatial_4 }
				}
			}
		}
	}
	
	modification_display = {
		0 = city_monthly_state_loyalty
		1 = local_state_trade_routes
		2 = value_income
		3 = value_population_capacity
	}
	
	#Ideally multiply it by count_building
	chance = {
		modifier = {
			add = 400
		}
	}

}

foundry_building = { #Old estates
	local_slaves_output = 0.4
	local_slaves_desired_pop_ratio = 0.1
	local_country_civilization_value = 5
	cost = 180
	time = 365

	potential = {
		has_city_status = yes
	}

	max_amount = 1

	allow = {
		
	}
	
	modification_display = {
		0 = local_slaves_output
		1 = local_slaves_desired_pop_ratio
		2 = value_civilization_cap
	}

	chance = {
		modifier = {
			add = 
			{
				value = num_of_slaves
				multiply = {
					value = 5
				}
			}
		}
	}
}

aqueduct_building = { #Old sewage
	local_population_capacity_modifier = 0.25
	local_citizen_happyness = 0.05
	local_country_civilization_value = 10

	cost = 320
	time = 365

	potential = {
		has_city_status = yes
	}

	max_amount = 1

	allow = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			
			trigger_if = {
				limit = { 
					owner = {
						NOR = {
							has_country_modifier = urbanization_3
							has_country_modifier = urbanization_4
						}
					} 
				}
				custom_tooltip = {
					text = "NEED_URBANIZATION_3_TT"
					always = no
				}
			}
		}
	}
	
	modification_display = {
		0 = value_population_capacity
		1 = local_citizen_happyness
		2 = value_civilization_cap
	}

	chance = {
		modifier = {
			add = 200 
			total_population > population_cap
		}
	}
}
academy_building = { #Old Schools building
	local_research_points_modifier = 0.25
	local_nobles_desired_pop_ratio = 0.1
	local_nobles_happyness = 0.04
	local_country_civilization_value = 10
	cost = 180
	time = 365

	potential = {
		has_city_status = yes
	}

	max_amount = 1

	allow = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			
			trigger_if = {
				limit = {
					owner = {
						NOR = {
							has_country_modifier = writing_3
							has_country_modifier = writing_4
						}
					}
				}
				custom_tooltip = {
					text = "NEED_WRITING_3_TT"
					always = no
				}
			}
		}
	}

	modification_display = {
		0 = value_research
		1 = local_pop_promotion_speed
	}

	chance = {
		modifier = {
			add = 
			{
				value = num_of_citizen
				multiply = {
					value = 10
				}
			}
		}
	}
}

barracks_building = { #Garrisons
	local_defensive = 0.5
	city_monthly_state_loyalty = 0.10
	cost = 180
	time = 365
	
	potential = {
		has_city_status = yes
	}

	max_amount = 1

	allow = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			
			trigger_if = {
				limit = {
					owner = {
						NOR = {
							has_country_modifier = military_structure_2
							has_country_modifier = military_structure_3
							has_country_modifier = military_structure_4
						}
					}
				}
				custom_tooltip = {
					text = "NEED_MILITARY_STRUCTURE_2"
					always = no
				}
			}
		}
	}
	
	modification_display = {
	}

	chance = {
		modifier = {
			add = 
			{
				value = fort_level
				multiply = {
					value = 100
				}
			}
		}
	}
}

library_building = { #Harbor
	local_state_trade_routes = 2
	local_citizen_desired_pop_ratio = 0.1

	cost = 180
	time = 365
	
	potential = {
		has_city_status = yes
		OR = {
			is_coastal = yes
			is_adjacent_to_major_river = yes
		}
	}

	max_amount = 1

	allow = {		
		trigger_if = {
			limit = { is_state_capital = no }
			custom_tooltip = {
				text = "NEED_STATE_CAPITAL_TT"
				always = no
			}
		}
		trigger_if = {
			limit = {
				this.state = {
					any_state_province = {
						num_of_library_building >= 1
					}
				}
			}
			custom_tooltip = {
				text = harbour_limit_tt
				always = no
			}
		}
	}
	
	modification_display = {
	}
	
	chance = {
		modifier = {
			add = 80
			is_state_capital = yes
		}
	}

}

temple_building = { #Conversion building
	local_pop_conversion_speed = 4
	local_citizen_happyness = 0.05

	cost = 180
	time = 365

	potential = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			has_city_status = yes
			OR = {
				owner = { 
					NOR = {
						country_culture_group = akkadian
						country_culture_group = sumerian
					}
				}
				has_building = temple_building
			}
		}
	}

	max_amount = 1

	allow = {
		
	}
	
	modification_display = {
	}
	
	chance = {
		modifier = {
			add = 50
			NOT = {dominant_province_religion = owner.religion}
		}
	}
}

theathre_building = { #Theater
	local_pop_assimilation_speed = 2
	local_citizen_happyness = 0.05
	local_nobles_happyness = 0.05
	
	cost = 180
	time = 365

	potential = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			has_city_status = yes
			OR = {
				owner = { 
					NOR = {
						country_culture_group = akkadian
						country_culture_group = sumerian
					}
				}
				has_building = theathre_building
			}
		}
	}

	allow = {
		
	}

	max_amount = 1
	
	modification_display = {
	}
	
	chance = {
		modifier = {
			NOT = { dominant_province_culture.culture_group = root.culture.culture_group }
			add = 50
		}
	}
}
zikkurat_building = { #Mesopotamian Culture building
	local_pop_assimilation_speed = 2
	local_pop_conversion_speed = 2

	cost = 250
	time = 365

	potential = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			has_city_status = yes
			OR = {
				owner = { 
					OR = {
						country_culture_group = akkadian
						country_culture_group = sumerian
					}
				}
				has_building = zikkurat_building
			}
		}
	}

	max_amount = 1
	
	allow = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			
			owner = { 
				OR = {
					country_culture_group = akkadian
					country_culture_group = sumerian
				}
			}
		}
	}

	modification_display = {
	}
	
	chance = {
		modifier = {
			NOR = { 
				dominant_province_culture.culture_group = root.culture.culture_group
				dominant_province_religion = owner.religion
			}
			add = 50
		}
	}
}
hurrian_breeder_building = { #Hurrian Culture building
	base_resources = 2
	local_start_experience = 35
	local_country_civilization_value = 5

	cost = 180
	time = 365

	potential = {
		#has_city_status = yes
		OR = {
			province_dominant_culture_group = hurrian 
			has_building = hurrian_breeder_building
		}
		trade_goods = horses
	}

	max_amount = 1
	
	allow = {
		
		trigger_if = {
			limit = { has_building = hurrian_breeder_building }
		}
		province_dominant_culture_group = hurrian 
	}

	modification_display = {
	}
	
	chance = {
		modifier = {
			add = 150
		}
	}
}
foreign_trading_district_building = { #Special building built through Foreign Trading Colony
	local_base_trade_routes_modifier = 0.75
	local_state_trade_routes = 3
	local_pop_assimilation_speed_modifier = -1
	local_country_civilization_value = 10
	
	cost = 180
	time = 365

	potential = {
		has_building = foreign_trading_district_building
	}

	max_amount = 1
	
	allow = {
		custom_tooltip = {
			text = "ONLY_BUILD_WITH_FOREIGN_TRADING_COLONY_TT"
			always = no
		}
		
	}
}

repeatable_building = { 
	local_population_capacity_modifier = 0.02
	local_population_growth = 0.01

	cost = 150
	time = 365

	potential = {
		has_city_status = yes
	}

	allow = {
		
	}
	
	modification_display = {
		0 = value_food_capacity
	}
	chance = {
		modifier = {
			add = -999
		}
	}
}


#Potentially interesting modifiers
#local_hostile_attrition
#base_resources
#local_start_experience
#
# Cultural Buildings
# Mesopo Zikkurat
# Aegean Harbor
# Hurrian Horse Breeder
# Egyptians Granary
# Levantine Garrison
# Iom assimilation building
# Cypriot copper mine
# Berber megalith?
### Settlement Buildings

slave_mine_building = {
	local_goods_from_slaves = -5
	local_population_capacity_modifier = 0.25
	local_slaves_output = 0.3
	local_freemen_happyness = -0.2
	local_slaves_happyness = -0.2
	local_slaves_desired_pop_ratio = 0.1
	local_country_civilization_value = 5

	max_amount = 1

	potential = {
		has_city_status = no
		OR = {
			trade_goods = marble
			trade_goods = stone
			trade_goods = precious_metals
			trade_goods = base_metals
			trade_goods = salt
			trade_goods = copper
			trade_goods = tin
			trade_goods = natron
			trade_goods = bitumen
			trade_goods = limestone
			trade_goods = obsidian
			AND = {
				trade_goods = gems
				is_coastal = no
			}
		}
	}
	
	allow = {
		OR = {
			trade_goods = marble
			trade_goods = stone
			trade_goods = precious_metals
			trade_goods = base_metals
			trade_goods = salt
			trade_goods = copper
			trade_goods = tin
			trade_goods = natron
			trade_goods = bitumen
			trade_goods = limestone
			trade_goods = obsidian
			AND = {
				trade_goods = gems
				is_coastal = no
			}
		}
	}
	chance = {
		modifier = {
			add = 40
		}
	}
	cost = 180
	time = 730
	
	modification_display = {
		0 = local_goods_from_slaves
		1 = local_slaves_output
	}
	
}

basic_settlement_infratructure_building = {
	local_monthly_food_modifier = 0.5
	local_freemen_desired_pop_ratio = 0.1
	local_population_capacity_modifier = 0.25
	local_country_civilization_value = 10

	max_amount = 1

	potential = {
		has_city_status = no
		OR = {
			terrain = plains
			terrain = farmland
			terrain = oasis
			terrain = hills
			terrain = mountain_valley
			terrain = flood_plain
			AND = {
				terrain = marsh
				OR = {
					trade_goods = vegetables
					trade_goods = cattle
				}
			}
			AND = {
				OR = {
					terrain = forest
					terrain = deep_forest
				}
				trade_goods = cattle
			}
		}
	}
	
	allow = {
		OR = {
			terrain = plains
			terrain = farmland
			terrain = oasis
			terrain = hills
			terrain = mountain_valley
			terrain = flood_plain
			AND = {
				terrain = marsh
				OR = {
					trade_goods = vegetables
					trade_goods = cattle
				}
			}
		}
	}

	chance = {
		modifier = {
			add = 40
		}
	}
	
	cost = 180
	time = 730
	
	modification_display = {
		1 = local_monthly_food_modifier
	}
	
}

hill_fort = {
	local_tribesmen_happyness = 0.2
	local_tribesmen_output = 0.4
	local_tribesmen_desired_pop_ratio = 0.1
	local_population_capacity_modifier = 0.25
	local_country_civilization_value = -5

	max_amount = 1

	potential = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			has_city_status = no
			OR = {
				owner = { is_ai = no }
				OR = {
					owner = { is_tribal = yes }
					terrain = mountain
					terrain = desert
					terrain = desert_valley
					terrain = desert_hills
					terrain = deep_forest
					terrain = marsh
				}
			}
		}
	}
	allow = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			OR = {
				owner = { is_ai = no }
				OR = {
					owner = { is_tribal = yes }
					terrain = mountain
					terrain = desert
					terrain = desert_valley
					terrain = desert_hills
					terrain = deep_forest
					terrain = marsh
				}
			}
		}
	}
	cost = 180
	time = 730
	chance = {
		modifier = {
			add = 
			{
				value = num_of_tribesmen
				divide = {
					value = 40
					add = num_of_freemen
				}
			}
		}
	}
	modification_display = {
		0 = local_tribesmen_happyness
		1 = local_tribesmen_output
	}
	
}

local_forum_building = {
	local_migration_speed_modifier = 0.75
	local_pop_assimilation_speed = 0.2
	local_country_civilization_value = 5

	max_amount = 1
	
	potential = {
		has_owner = yes
		trigger_if = {
			limit = { has_owner = yes }
			has_city_status = no
			owner = { is_ai = no }
		}
	}
	allow = {
		
	}
	cost = 180
	time = 180
	
	modification_display = {
		0 = local_migration_speed_modifier
		1 = happiness_for_wrong_culture_modifier
	}
	
}
#ADDED
shipyards = {
	local_ship_start_experience = 35
	local_ship_recruit_speed = 0.5
	local_country_civilization_value = 5

	max_amount = 1

	potential = {
		is_port = yes
	}
	
	allow = {
		is_port = yes
	}
	
	cost = 180
	time = 730
	
	modification_display = {
	}
	
}
watering_holes = {
	supply_limit_modifier = 0.75
	local_monthly_food_modifier = 0.2
	local_tribesmen_desired_pop_ratio = 0.1
	attrition = -1
	local_country_civilization_value = 10

	max_amount = 1

	potential = {
		has_city_status = no
		OR = {
			terrain = desert
			terrain = desert_valley
			terrain = desert_hills
		}
	}
	
	allow = {
		OR = {
			terrain = desert
			terrain = desert_valley
			terrain = desert_hills
		}
	}

	chance = {
		modifier = {
			add = 10
		}
	}
	
	cost = 180
	time = 730
	
	modification_display = {
		0 = supply_limit
		1 = local_monthly_food_modifier
	}
	
}
latifundia_building = {
	local_monthly_food_modifier = -0.4
	local_goods_from_slaves = -6
	local_slaves_desired_pop_ratio = 0.15
	local_freemen_desired_pop_ratio = -0.1
	local_population_capacity_modifier = 0.25
	local_slaves_output = 0.3
	local_country_civilization_value = 10

	max_amount = 1

	potential = {
		has_city_status = no
		OR = {
			trade_goods = saffron
			trade_goods = spices
			trade_goods = wine
			trade_goods = olive
			trade_goods = fruits
			trade_goods = dye
			trade_goods = papyrus
			trade_goods = grain
			terrain = farmland
			terrain = flood_plain
		}
	}
	
	allow = {
		OR = {
			trade_goods = saffron
			trade_goods = spices
			trade_goods = wine
			trade_goods = olive
			trade_goods = fruits
			trade_goods = dye
			trade_goods = papyrus
			trade_goods = grain
			terrain = farmland
			terrain = flood_plain
		}
	}

	chance = {
		modifier = {
			add = 20
		}
	}

	cost = 180
	time = 730
	
	modification_display = {
		0 = value_base_resources
		1 = local_monthly_food_modifier
		2 = value_income
	}
	
}
fisheries = {
	local_monthly_food_modifier = 0.4
	local_goods_from_slaves = -4
	local_freemen_desired_pop_ratio = 0.05
	local_tribesmen_desired_pop_ratio = 0.05
	local_population_capacity_modifier = 0.25
	local_country_civilization_value = 5

	max_amount = 1

	potential = {
		has_city_status = no
		OR = {
			is_coastal = yes
			trade_goods = fish
		}
	}
	
	allow = {
		OR = {
			is_coastal = yes
			trade_goods = fish
		}
	}

	chance = {
		modifier = {
			add = 20
		}
	}

	
	cost = 180
	time = 730
	
	modification_display = {
		0 = local_goods_from_slaves
		1 = local_monthly_food_modifier
	}
	
}
logging_camps = {
	local_goods_from_slaves = -9
	local_tribesmen_desired_pop_ratio = 0.05
	local_slaves_desired_pop_ratio = 0.05
	local_population_capacity_modifier = 0.25
	local_country_civilization_value = 5

	max_amount = 1

	potential = {
		has_city_status = no
		OR = {
			trade_goods = wood
			trade_goods = cedar
		}
	}
	
	allow = {
		OR = {
			trade_goods = wood
			trade_goods = cedar
		}
	}
	
	cost = 180
	time = 730
	
	modification_display = {
		0 = local_goods_from_slaves
		1 = local_monthly_food_modifier
	}
	
}
hunting_camps = {
	local_goods_from_slaves = -5
	local_monthly_food_modifier = 0.30
	local_tribesmen_desired_pop_ratio = 0.1
	local_population_capacity_modifier = 0.25
	local_tribesmen_output = 0.3
	local_country_civilization_value = -5

	max_amount = 1

	potential = {
		has_city_status = no
		OR = {
			trade_goods = ivory
			trade_goods = wild_game
			trade_goods = fur
		}
	}
	
	allow = {
		OR = {
			trade_goods = ivory
			trade_goods = wild_game
			trade_goods = fur
		}
	}

	chance = {
		modifier = {
			add = 20
		}
	}

	
	cost = 180
	time = 730
	
	modification_display = {
		0 = value_base_resources
		1 = local_monthly_food_modifier
	}
	
}
# Resource Dependent:
# Mines, Salt Mines, Farming Community, Plantations (Fruits, saffron etc)
# Logging Camp, Horse Breeders, Fishing Ports,
# Hunting Community (Ivory, Wild Game, Fur)
# 
# Fishery (Coastal)
# Shipyard (has port)
# Terrain Dependent:
# Valley Forts (Mountain Valley)
# Watering Hole (Desert)
# Reed Houses (Marshes)
# Farming Commmunity (Plains, Farmland, Oasis, Hills)
# 
# Others:
# 